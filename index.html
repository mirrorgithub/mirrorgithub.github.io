<!DOCTYPE html>
<html>
	<head>
		<title>aa</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
		<style type="text/css">
			.flex_container {
				display: flex;
				flex-direction: row;
			}

			.flex_div{
				flex: 1;
				padding: 10px;
			}

			#error_msg {
				color: red;
			}
		</style>
	</head>
	<body>
		<div style="position:absolute; transform:translateY(-50%); top:50%;">
			<div class="flex_container">
				<div class="flex_div" style="text-align: right;">請輸入國防醫學院抽獎序號</div>
				<div class="flex_div" style="text-align: left;"><input id="serial_num"></input></div>
			</div>
			<div class="flex_container">
				<div class="flex_div"></div>
				<div class="flex_div" style="text-align: left;" id="error_msg"></div>
			</div>
			<div class="flex_container" style="margin: 0px auto;">
				<div class="flex_div"></div>
				<div class="flex_div"><button onclick="send_data()">send</button></div>
			</div>
		</div>
		<script type="text/javascript">
			function send_data()
			{
				var serial_num = $("#serial_num").val();
				$('button').prop('disabled', true);
				$.ajax({
					url: "https://ndmc2021-api.fnc.tw/api?serial="+serial_num
				}).done(function(data) {
					$('button').prop('disabled', false);
					console.log(data);
					console.log(data.isError);
					console.log(data.isPass);
					console.log(data.message);
					if(data.isPass && !data.isError)
					{
						location.href = "https://docs.google.com/forms/d/e/1FAIpQLSc8dzMgbSg4PjivwTVjoSJ0vV5IFNLzk2tXQwKaMg6oGd20lg/viewform?usp=pp_url&entry.1619151144="+serial_num;
					}
					else
					{
						$("#error_msg").html(data.message);
					}
				});
			}
		</script>
	</body>
</html>
